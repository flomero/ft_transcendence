<!-- Chat Header -->
<div id="chat-header" class="flex-shrink-0 p-3 border-b border-border">
  <div id="chat-title-container" class="flex items-center transition-height h-10 duration-300">
    {{#> components/button id="back-to-chats" variant="ghost" class="has-[svg]:hidden hidden mr-2" onclick="chat.backToChats" aria-label="Back to Chats"}}
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left"><path d="m15 18-6-6 6-6"/></svg>
    {{/components/button}}
    <h3 id="chat-title" class="font-medium truncate">All Chats</h3>
  </div>
</div>

<!-- Chat Rooms List View -->
<div id="chat-rooms-view" class="flex-1 h-0">
  <div id="chat-rooms" class="p-2 space-y-2 overflow-y-auto">
    {{#each rooms}}
      {{> components/chat/room room=this}}
    {{/each}}
  </div>
</div>

<!-- Individual Chat View (initially hidden) -->
<div id="chat-messages-view" class="hidden flex-1 h-0">
  <div id="chat-messages-container" class="p-4 w-full flex flex-col-reverse overflow-y-scroll">
    <!-- Chat Messages -->
  </div>
</div>

<div class="flex-shrink-0">
  <form id="chat-input" class="hidden gap-2 p-4 border-t border-border" onsubmit="chat.sendMessage(event)" method="POST" autocomplete="off">
    <input type="text" class="input flex-1 w-0" required name="message" placeholder="Message...">
    {{#> components/button aria-label="Send Message"}}
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-send"><path d="M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"/><path d="m21.854 2.147-10.94 10.939"/></svg>
    {{/components/button}}
  </form>
</div>

<script type="module" src="/public/js/chat.js"></script>