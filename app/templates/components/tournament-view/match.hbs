<style>
  /* Define reusable styles in your CSS file */
  .reusable-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    padding: 0 0 0 0.5rem;
    width: 100%;
    border-radius: 0.375rem; /* rounded-md */
    transition: background-color 0.15s ease-in-out, color 0.15s ease-in-out;
  }

  .reusable-item:hover {
    background-color: var(--hover-bg-color, #f1f5f9); /* Default: slate-100 */
  }

  .reusable-item:focus-visible {
    background-color: var(--focus-bg-color, #f1f5f9); /* Default: slate-100 */
    outline: none;
    box-shadow: 0 0 0 2px var(--focus-ring-color, rgba(148, 163, 184, 0.4)); /* Default: slate-400/40 */
  }
</style>

<div id="{{match.id}}" class="match border bg-black-200 mt-2 mb-2 p-2 rounded-lg">
  {{#with match.additionalData as |ad|}}
    <table class="w-full table-auto text-sm font-mono">
      <tbody>
        {{#each ../match.players as |player playerIndex|}}
          <tr>
            <!-- Player name -->
            <td style="padding-right:0.5rem;font-weight:600;white-space:nowrap;">
              {{player.name}}
            </td>

            {{#if player.isReady}}
              <!-- Win count with proper leadPlayer logic -->
              {{#if (eq ad.leadPlayer playerIndex)}}
                <td style="padding:0.25rem 0.5rem;text-align:center;font-weight:bold;
                          background:#399b5d;color:white;border-radius:0.25rem;">
                  {{player.winCount}}
                </td>
              {{else}}
                {{#if (eq ad.leadPlayer -1)}}
                  <td style="padding:0.25rem 0.5rem;text-align:center;font-weight:bold;
                            background:#9ca3af;color:white;border-radius:0.25rem;">
                    {{player.winCount}}
                  </td>
                {{else}}
                  <td style="padding:0.25rem 0.5rem;text-align:center;font-weight:bold;
                            background:#4b5563;color:white;border-radius:0.25rem;">
                    {{player.winCount}}
                  </td>
                {{/if}}
              {{/if}}

              <!-- Separator -->
              <td style="padding:0 0.5rem;color:#6b7280;">|</td>

              <!-- Game scores, using lookup to pull the winner index -->
              {{#each player.score as |score gameIndex|}}
                {{#if (eq (lookup ad.gameWinners gameIndex) playerIndex)}}
                  <td style="padding:0.25rem 0.5rem;text-align:center;border-radius:0.25rem;
                            background:#399b5d;">
                    {{score}}
                  </td>
                {{else}}
                  <td style="padding:0.25rem 0.5rem;text-align:center;border-radius:0.25rem;
                            background:#4b5563;">
                    {{score}}
                  </td>
                {{/if}}
              {{/each}}
            {{/if}}
          </tr>
        {{/each}}
      </tbody>
    </table>

    {{#if (eq ../match.status "ONGOING")}}
      <div style="margin-top:1rem;">
        <h3 style="font-size:1.125rem;font-weight:700;color:#facc15;">
          Game {{add ad.currentGame 1}} in progress
        </h3>
        <p style="font-size:0.875rem;">
          Started at: {{formatDate ../match.startTime "HH:mm"}}
        </p>
        <p style="font-size:0.875rem;">
          Duration:
          <span class="elapsed-time" data-start="{{../match.startTime}}"></span>
        </p>
      </div>
    {{/if}}
  {{/with}}
</div>
