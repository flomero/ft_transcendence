<div
  id="{{match.id}}"
  class="match border bg-black-200 mt-2 mb-2 p-2 rounded-lg"
>
  <table class="w-full table-auto text-sm font-mono">
    <tbody>
    {{#each match.players as |player playerIndex|}}
      <tr>
        <!-- Player name -->
        <td class="pr-2 font-semibold whitespace-nowrap">
          {{player.name}}
        </td>

        {{#if player.isReady}}
          <!-- Win-count badge, colour depends on leadPlayer -->
          {{#if (eq ../match.leadPlayer playerIndex)}}
            <td class="px-2 font-bold text-center rounded bg-green-600 text-white">
              {{player.winCount}}
            </td>
          {{else if (eq ../match.leadPlayer -1)}}
            <td class="px-2 font-bold text-center rounded bg-gray-400 text-white">
              {{player.winCount}}
            </td>
          {{else}}
            <td class="px-2 font-bold text-center rounded bg-gray-700 text-white">
              {{player.winCount}}
            </td>
          {{/if}}

          <!-- Separator -->
          <td class="px-2 text-gray-500">|</td>

          <!-- Per-game scores -->
          {{#each player.score as |score gameIndex|}}
            {{#if (eq (lookup ../match.gameWinners gameIndex) playerIndex)}}
              <td class="px-2 text-center rounded bg-green-600 text-white">
                {{score}}
              </td>
            {{else}}
              <td class="px-2 text-center rounded bg-gray-700 text-white">
                {{score}}
              </td>
            {{/if}}
          {{/each}}
        {{/if}}
      </tr>
    {{/each}}
    </tbody>
  </table>

  {{#if (eq match.status "ONGOING")}}
    <div class="mt-4">
      <h3 class="text-lg font-bold text-yellow-400">
        Game {{add match.currentGame 1}} in progress
      </h3>
      <p class="text-sm">
        Started at: {{formatDate match.startTime "HH:mm"}}
      </p>
      <p class="text-sm">
        Duration:
        <span class="elapsed-time" data-start="{{match.startTime}}"></span>
      </p>
    </div>
  {{/if}}
</div>
